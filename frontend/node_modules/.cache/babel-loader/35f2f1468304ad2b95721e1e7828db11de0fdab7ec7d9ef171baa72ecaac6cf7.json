{"ast":null,"code":"import { useStore } from \"vuex\";\nimport { useRouter } from \"vue-router\";\nimport { computed, onMounted, nextTick } from \"vue\";\nimport { Dropdown } from \"bootstrap\";\nimport defaultProfilePicture from \"@/assets/img/default-profile.jpg\"; // Imagen por defecto\n\nexport default {\n  name: \"Navbar\",\n  setup() {\n    const store = useStore();\n    const router = useRouter();\n\n    // Computed properties para obtener datos del usuario\n    const isAuthenticated = computed(() => store.getters[\"auth/isAuthenticated\"]);\n    const userName = computed(() => store.getters[\"auth/userData\"]?.name || \"Usuario\");\n    const userProfilePicture = computed(() => store.getters[\"auth/userData\"]?.profilePicture || defaultProfilePicture);\n\n    // Método para cerrar sesión\n    const logout = () => {\n      store.dispatch(\"auth/logout\");\n      router.push(\"/login\");\n    };\n\n    // Inicializar los dropdowns de Bootstrap al montar el componente\n    onMounted(() => {\n      nextTick(() => {\n        const dropdownElement = document.querySelector(\"#navbarDropdown\");\n        const dropdownMenu = document.querySelector(\".dropdown-menu\");\n        if (dropdownElement && dropdownMenu) {\n          console.log(\"Dropdown encontrado, inicializando...\");\n          const dropdownInstance = new Dropdown(dropdownElement);\n\n          // Escuchar clic en el dropdown para activarlo manualmente\n          dropdownElement.addEventListener(\"click\", event => {\n            event.preventDefault();\n            dropdownInstance.toggle();\n\n            // Verificar si la clase \"show\" no está presente y agregarla manualmente\n            if (!dropdownMenu.classList.contains(\"show\")) {\n              dropdownMenu.classList.add(\"show\");\n              dropdownMenu.style.display = \"block\";\n              console.log(\"Clase 'show' agregada manualmente.\");\n            } else {\n              dropdownMenu.classList.remove(\"show\");\n              dropdownMenu.style.display = \"none\";\n              console.log(\"Clase 'show' removida.\");\n            }\n            console.log(\"Clases actuales del dropdown-menu:\", dropdownMenu.classList);\n          });\n        } else {\n          console.log(\"El dropdown no fue encontrado en el DOM.\");\n        }\n      });\n      if (isAuthenticated.value) {\n        store.dispatch(\"auth/fetchUserData\"); // Obtener datos del usuario\n      }\n    });\n    return {\n      isAuthenticated,\n      userName,\n      userProfilePicture,\n      logout\n    };\n  }\n};","map":{"version":3,"names":["useStore","useRouter","computed","onMounted","nextTick","Dropdown","defaultProfilePicture","name","setup","store","router","isAuthenticated","getters","userName","userProfilePicture","profilePicture","logout","dispatch","push","dropdownElement","document","querySelector","dropdownMenu","console","log","dropdownInstance","addEventListener","event","preventDefault","toggle","classList","contains","add","style","display","remove","value"],"sources":["/Users/macbookpro/project/LatedServices/frontend/src/components/Navbar.vue"],"sourcesContent":["<template>\n  <nav class=\"navbar navbar-expand-lg navbar-dark bg-primary fixed-top\">\n    <div class=\"container\">\n      <router-link class=\"navbar-brand fw-bold text-uppercase\" to=\"/\">Servicios de Lated</router-link>\n\n      <!-- Botón para dispositivos móviles -->\n      <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarNav\">\n        <span class=\"navbar-toggler-icon\"></span>\n      </button>\n\n      <!-- Contenido del Navbar -->\n      <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\n        <ul class=\"navbar-nav ms-auto\">\n          <!-- Botones de Login y Registro si el usuario NO está autenticado -->\n          <li class=\"nav-item me-3\" v-if=\"!isAuthenticated\">\n            <router-link class=\"nav-link btn-custom\" to=\"/login\">Accede</router-link>\n          </li>\n          <li class=\"nav-item\" v-if=\"!isAuthenticated\">\n            <router-link class=\"nav-link btn-custom\" to=\"/register\">Regístrate</router-link>\n          </li>\n\n          <!-- Menú desplegable si el usuario SÍ está autenticado -->\n          <li class=\"nav-item dropdown ms-3 d-flex align-items-center\" v-show=\"isAuthenticated\">\n            <span class=\"text-light me-2\">Bienvenido, {{ userName }}</span>\n            <a\n              class=\"nav-link dropdown-toggle d-flex align-items-center\"\n              href=\"#\"\n              id=\"navbarDropdown\"\n              role=\"button\"\n              data-bs-toggle=\"dropdown\"\n              aria-expanded=\"false\"\n            >\n              <img\n                :src=\"userProfilePicture\"\n                alt=\"Foto de Perfil\"\n                class=\"rounded-circle me-2\"\n                width=\"40\"\n                height=\"40\"\n              />\n            </a>\n            <ul class=\"dropdown-menu dropdown-menu-end\" aria-labelledby=\"navbarDropdown\">\n              <li><router-link class=\"dropdown-item\" to=\"/profile\">Mi Perfil</router-link></li>\n              <li><router-link class=\"dropdown-item\" to=\"/client/services\">Servicios Disponibles</router-link></li>\n              <li><button class=\"dropdown-item\" @click=\"logout\">Cerrar Sesión</button></li>\n            </ul>\n          </li>\n        </ul>\n      </div>\n    </div>\n  </nav>\n</template>\n\n<script>\nimport { useStore } from \"vuex\";\nimport { useRouter } from \"vue-router\";\nimport { computed, onMounted, nextTick } from \"vue\";\nimport { Dropdown } from \"bootstrap\";\nimport defaultProfilePicture from \"@/assets/img/default-profile.jpg\"; // Imagen por defecto\n\nexport default {\n  name: \"Navbar\",\n  setup() {\n    const store = useStore();\n    const router = useRouter();\n\n    // Computed properties para obtener datos del usuario\n    const isAuthenticated = computed(() => store.getters[\"auth/isAuthenticated\"]);\n    const userName = computed(() => store.getters[\"auth/userData\"]?.name || \"Usuario\");\n    const userProfilePicture = computed(() => store.getters[\"auth/userData\"]?.profilePicture || defaultProfilePicture);\n\n    // Método para cerrar sesión\n    const logout = () => {\n      store.dispatch(\"auth/logout\");\n      router.push(\"/login\");\n    };\n\n    // Inicializar los dropdowns de Bootstrap al montar el componente\n    onMounted(() => {\n      nextTick(() => {\n        const dropdownElement = document.querySelector(\"#navbarDropdown\");\n        const dropdownMenu = document.querySelector(\".dropdown-menu\");\n\n        if (dropdownElement && dropdownMenu) {\n          console.log(\"Dropdown encontrado, inicializando...\");\n          const dropdownInstance = new Dropdown(dropdownElement);\n\n          // Escuchar clic en el dropdown para activarlo manualmente\n          dropdownElement.addEventListener(\"click\", (event) => {\n            event.preventDefault();\n            dropdownInstance.toggle();\n\n            // Verificar si la clase \"show\" no está presente y agregarla manualmente\n            if (!dropdownMenu.classList.contains(\"show\")) {\n              dropdownMenu.classList.add(\"show\");\n              dropdownMenu.style.display = \"block\";\n              console.log(\"Clase 'show' agregada manualmente.\");\n            } else {\n              dropdownMenu.classList.remove(\"show\");\n              dropdownMenu.style.display = \"none\";\n              console.log(\"Clase 'show' removida.\");\n            }\n\n            console.log(\"Clases actuales del dropdown-menu:\", dropdownMenu.classList);\n          });\n        } else {\n          console.log(\"El dropdown no fue encontrado en el DOM.\");\n        }\n      });\n\n      if (isAuthenticated.value) {\n        store.dispatch(\"auth/fetchUserData\"); // Obtener datos del usuario\n      }\n    });\n\n    return { isAuthenticated, userName, userProfilePicture, logout };\n  },\n};\n</script>\n\n<style scoped>\n.navbar {\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n}\n\n.navbar-brand {\n  font-size: 1.5rem;\n  letter-spacing: 1px;\n}\n\n.btn-custom {\n  background-color: #f8f9fa;\n  color: #212529;\n  border-radius: 25px;\n  padding: 8px 20px;\n  transition: all 0.3s ease;\n}\n\n.btn-custom:hover {\n  background-color: #345896;\n  color: rgb(255, 255, 255);\n}\n\n.nav-item {\n  margin-bottom: 10px;\n}\n\n.dropdown-menu {\n  min-width: 200px;\n  opacity: 0;\n  visibility: hidden;\n  transition: opacity 0.3s ease-in-out;\n}\n\n.dropdown.show .dropdown-menu {\n  opacity: 1;\n  visibility: visible;\n}\n\nimg.rounded-circle {\n  object-fit: cover;\n}\n\n@media (min-width: 768px) {\n  .nav-item {\n    margin-bottom: 0;\n  }\n  .me-3 {\n    margin-right: 15px;\n  }\n  .ms-3 {\n    margin-left: 15px;\n  }\n}\n</style>\n"],"mappings":"AAqDA,SAASA,QAAO,QAAS,MAAM;AAC/B,SAASC,SAAQ,QAAS,YAAY;AACtC,SAASC,QAAQ,EAAEC,SAAS,EAAEC,QAAO,QAAS,KAAK;AACnD,SAASC,QAAO,QAAS,WAAW;AACpC,OAAOC,qBAAoB,MAAO,kCAAkC,EAAE;;AAEtE,eAAe;EACbC,IAAI,EAAE,QAAQ;EACdC,KAAKA,CAAA,EAAG;IACN,MAAMC,KAAI,GAAIT,QAAQ,CAAC,CAAC;IACxB,MAAMU,MAAK,GAAIT,SAAS,CAAC,CAAC;;IAE1B;IACA,MAAMU,eAAc,GAAIT,QAAQ,CAAC,MAAMO,KAAK,CAACG,OAAO,CAAC,sBAAsB,CAAC,CAAC;IAC7E,MAAMC,QAAO,GAAIX,QAAQ,CAAC,MAAMO,KAAK,CAACG,OAAO,CAAC,eAAe,CAAC,EAAEL,IAAG,IAAK,SAAS,CAAC;IAClF,MAAMO,kBAAiB,GAAIZ,QAAQ,CAAC,MAAMO,KAAK,CAACG,OAAO,CAAC,eAAe,CAAC,EAAEG,cAAa,IAAKT,qBAAqB,CAAC;;IAElH;IACA,MAAMU,MAAK,GAAIA,CAAA,KAAM;MACnBP,KAAK,CAACQ,QAAQ,CAAC,aAAa,CAAC;MAC7BP,MAAM,CAACQ,IAAI,CAAC,QAAQ,CAAC;IACvB,CAAC;;IAED;IACAf,SAAS,CAAC,MAAM;MACdC,QAAQ,CAAC,MAAM;QACb,MAAMe,eAAc,GAAIC,QAAQ,CAACC,aAAa,CAAC,iBAAiB,CAAC;QACjE,MAAMC,YAAW,GAAIF,QAAQ,CAACC,aAAa,CAAC,gBAAgB,CAAC;QAE7D,IAAIF,eAAc,IAAKG,YAAY,EAAE;UACnCC,OAAO,CAACC,GAAG,CAAC,uCAAuC,CAAC;UACpD,MAAMC,gBAAe,GAAI,IAAIpB,QAAQ,CAACc,eAAe,CAAC;;UAEtD;UACAA,eAAe,CAACO,gBAAgB,CAAC,OAAO,EAAGC,KAAK,IAAK;YACnDA,KAAK,CAACC,cAAc,CAAC,CAAC;YACtBH,gBAAgB,CAACI,MAAM,CAAC,CAAC;;YAEzB;YACA,IAAI,CAACP,YAAY,CAACQ,SAAS,CAACC,QAAQ,CAAC,MAAM,CAAC,EAAE;cAC5CT,YAAY,CAACQ,SAAS,CAACE,GAAG,CAAC,MAAM,CAAC;cAClCV,YAAY,CAACW,KAAK,CAACC,OAAM,GAAI,OAAO;cACpCX,OAAO,CAACC,GAAG,CAAC,oCAAoC,CAAC;YACnD,OAAO;cACLF,YAAY,CAACQ,SAAS,CAACK,MAAM,CAAC,MAAM,CAAC;cACrCb,YAAY,CAACW,KAAK,CAACC,OAAM,GAAI,MAAM;cACnCX,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAC;YACvC;YAEAD,OAAO,CAACC,GAAG,CAAC,oCAAoC,EAAEF,YAAY,CAACQ,SAAS,CAAC;UAC3E,CAAC,CAAC;QACJ,OAAO;UACLP,OAAO,CAACC,GAAG,CAAC,0CAA0C,CAAC;QACzD;MACF,CAAC,CAAC;MAEF,IAAIb,eAAe,CAACyB,KAAK,EAAE;QACzB3B,KAAK,CAACQ,QAAQ,CAAC,oBAAoB,CAAC,EAAE;MACxC;IACF,CAAC,CAAC;IAEF,OAAO;MAAEN,eAAe;MAAEE,QAAQ;MAAEC,kBAAkB;MAAEE;IAAO,CAAC;EAClE;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
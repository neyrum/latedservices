{"ast":null,"code":"import axios from \"@/plugins/axios\";\nimport Navbar from \"@/components/Navbar.vue\";\nexport default {\n  name: \"RequestService\",\n  components: {\n    Navbar\n  },\n  data() {\n    return {\n      service: null,\n      // Detalles del servicio seleccionado\n      form: {\n        description: \"\",\n        priority: \"medium\"\n      },\n      successMessage: \"\",\n      errorMessage: \"\",\n      isLoading: true,\n      // Estado para manejar la carga de datos\n      isSubmitting: false // Estado para manejar el envío del formulario\n    };\n  },\n  async created() {\n    const serviceId = this.$route.query.serviceId;\n    if (!serviceId) {\n      this.errorMessage = \"No se proporcionó un ID de servicio.\";\n      this.isLoading = false;\n      return;\n    }\n    await this.fetchService(serviceId);\n  },\n  methods: {\n    async fetchService(serviceId) {\n      try {\n        const response = await axios.get(`/services/${serviceId}`);\n        this.service = response.data;\n        this.errorMessage = \"\";\n      } catch (error) {\n        this.errorMessage = error.response?.data?.message || \"Error al cargar los detalles del servicio.\";\n      } finally {\n        this.isLoading = false;\n      }\n    },\n    async submitRequest() {\n      this.isSubmitting = true; // Activa el estado de envío\n      try {\n        await axios.post(\"/requests\", {\n          serviceId: this.service.id,\n          description: this.form.description,\n          priority: this.form.priority\n        });\n        this.successMessage = \"¡Solicitud enviada exitosamente!\";\n        this.errorMessage = \"\";\n        this.form.description = \"\"; // Reinicia el formulario\n        this.form.priority = \"medium\";\n      } catch (error) {\n        this.errorMessage = error.response?.data?.message || \"Error al enviar la solicitud.\";\n        this.successMessage = \"\";\n      } finally {\n        this.isSubmitting = false; // Desactiva el estado de envío\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","Navbar","name","components","data","service","form","description","priority","successMessage","errorMessage","isLoading","isSubmitting","created","serviceId","$route","query","fetchService","methods","response","get","error","message","submitRequest","post","id"],"sources":["/Users/macbookpro/project/LatedServices/frontend/src/views/client/RequestService.vue"],"sourcesContent":["<template>\n  <div class=\"content\">\n    <Navbar />\n    <div class=\"container mt-5\">\n      <h2 class=\"mb-4\">Solicitar un Servicio</h2>\n\n      <!-- Mensaje de éxito -->\n      <div v-if=\"successMessage\" class=\"alert alert-success\" role=\"alert\">\n        {{ successMessage }}\n      </div>\n\n      <!-- Mensaje de error -->\n      <div v-if=\"errorMessage\" class=\"alert alert-danger\" role=\"alert\">\n        {{ errorMessage }}\n      </div>\n\n      <!-- Indicador de carga -->\n      <div v-if=\"isLoading\" class=\"text-center\">\n        <p>Cargando detalles del servicio...</p>\n      </div>\n\n      <!-- Formulario de solicitud -->\n      <form v-if=\"!isLoading && service\" @submit.prevent=\"submitRequest\">\n        <div class=\"form-group\">\n          <label for=\"serviceName\">Nombre del Servicio</label>\n          <input\n            id=\"serviceName\"\n            type=\"text\"\n            class=\"form-control\"\n            :value=\"service.name\"\n            disabled\n          />\n        </div>\n        <div class=\"form-group\">\n          <label for=\"description\">Descripción</label>\n          <textarea\n            id=\"description\"\n            v-model=\"form.description\"\n            class=\"form-control\"\n            rows=\"4\"\n            placeholder=\"Describe el servicio que necesitas\"\n            required\n          ></textarea>\n        </div>\n        <div class=\"form-group\">\n          <label for=\"priority\">Prioridad</label>\n          <select\n            id=\"priority\"\n            v-model=\"form.priority\"\n            class=\"form-control\"\n            required\n          >\n            <option value=\"low\">Baja</option>\n            <option value=\"medium\">Media</option>\n            <option value=\"high\">Alta</option>\n          </select>\n        </div>\n        <button type=\"submit\" class=\"btn btn-primary\" :disabled=\"isSubmitting\">\n          {{ isSubmitting ? \"Enviando...\" : \"Enviar Solicitud\" }}\n        </button>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"@/plugins/axios\";\nimport Navbar from \"@/components/Navbar.vue\";\n\nexport default {\n  name: \"RequestService\",\n  components: { Navbar },\n  data() {\n    return {\n      service: null, // Detalles del servicio seleccionado\n      form: {\n        description: \"\",\n        priority: \"medium\",\n      },\n      successMessage: \"\",\n      errorMessage: \"\",\n      isLoading: true, // Estado para manejar la carga de datos\n      isSubmitting: false, // Estado para manejar el envío del formulario\n    };\n  },\n  async created() {\n    const serviceId = this.$route.query.serviceId;\n    if (!serviceId) {\n      this.errorMessage = \"No se proporcionó un ID de servicio.\";\n      this.isLoading = false;\n      return;\n    }\n    await this.fetchService(serviceId);\n  },\n  methods: {\n    async fetchService(serviceId) {\n      try {\n        const response = await axios.get(`/services/${serviceId}`);\n        this.service = response.data;\n        this.errorMessage = \"\";\n      } catch (error) {\n        this.errorMessage =\n          error.response?.data?.message || \"Error al cargar los detalles del servicio.\";\n      } finally {\n        this.isLoading = false;\n      }\n    },\n    async submitRequest() {\n      this.isSubmitting = true; // Activa el estado de envío\n      try {\n        await axios.post(\"/requests\", {\n          serviceId: this.service.id,\n          description: this.form.description,\n          priority: this.form.priority,\n        });\n        this.successMessage = \"¡Solicitud enviada exitosamente!\";\n        this.errorMessage = \"\";\n        this.form.description = \"\"; // Reinicia el formulario\n        this.form.priority = \"medium\";\n      } catch (error) {\n        this.errorMessage =\n          error.response?.data?.message || \"Error al enviar la solicitud.\";\n        this.successMessage = \"\";\n      } finally {\n        this.isSubmitting = false; // Desactiva el estado de envío\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.content {\n  margin-top: 70px; /* Ajusta este valor según la altura de tu Navbar */\n}\n.container {\n  max-width: 600px;\n}\n</style>"],"mappings":"AAkEA,OAAOA,KAAI,MAAO,iBAAiB;AACnC,OAAOC,MAAK,MAAO,yBAAyB;AAE5C,eAAe;EACbC,IAAI,EAAE,gBAAgB;EACtBC,UAAU,EAAE;IAAEF;EAAO,CAAC;EACtBG,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,OAAO,EAAE,IAAI;MAAE;MACfC,IAAI,EAAE;QACJC,WAAW,EAAE,EAAE;QACfC,QAAQ,EAAE;MACZ,CAAC;MACDC,cAAc,EAAE,EAAE;MAClBC,YAAY,EAAE,EAAE;MAChBC,SAAS,EAAE,IAAI;MAAE;MACjBC,YAAY,EAAE,KAAK,CAAE;IACvB,CAAC;EACH,CAAC;EACD,MAAMC,OAAOA,CAAA,EAAG;IACd,MAAMC,SAAQ,GAAI,IAAI,CAACC,MAAM,CAACC,KAAK,CAACF,SAAS;IAC7C,IAAI,CAACA,SAAS,EAAE;MACd,IAAI,CAACJ,YAAW,GAAI,sCAAsC;MAC1D,IAAI,CAACC,SAAQ,GAAI,KAAK;MACtB;IACF;IACA,MAAM,IAAI,CAACM,YAAY,CAACH,SAAS,CAAC;EACpC,CAAC;EACDI,OAAO,EAAE;IACP,MAAMD,YAAYA,CAACH,SAAS,EAAE;MAC5B,IAAI;QACF,MAAMK,QAAO,GAAI,MAAMnB,KAAK,CAACoB,GAAG,CAAC,aAAaN,SAAS,EAAE,CAAC;QAC1D,IAAI,CAACT,OAAM,GAAIc,QAAQ,CAACf,IAAI;QAC5B,IAAI,CAACM,YAAW,GAAI,EAAE;MACxB,EAAE,OAAOW,KAAK,EAAE;QACd,IAAI,CAACX,YAAW,GACdW,KAAK,CAACF,QAAQ,EAAEf,IAAI,EAAEkB,OAAM,IAAK,4CAA4C;MACjF,UAAU;QACR,IAAI,CAACX,SAAQ,GAAI,KAAK;MACxB;IACF,CAAC;IACD,MAAMY,aAAaA,CAAA,EAAG;MACpB,IAAI,CAACX,YAAW,GAAI,IAAI,EAAE;MAC1B,IAAI;QACF,MAAMZ,KAAK,CAACwB,IAAI,CAAC,WAAW,EAAE;UAC5BV,SAAS,EAAE,IAAI,CAACT,OAAO,CAACoB,EAAE;UAC1BlB,WAAW,EAAE,IAAI,CAACD,IAAI,CAACC,WAAW;UAClCC,QAAQ,EAAE,IAAI,CAACF,IAAI,CAACE;QACtB,CAAC,CAAC;QACF,IAAI,CAACC,cAAa,GAAI,kCAAkC;QACxD,IAAI,CAACC,YAAW,GAAI,EAAE;QACtB,IAAI,CAACJ,IAAI,CAACC,WAAU,GAAI,EAAE,EAAE;QAC5B,IAAI,CAACD,IAAI,CAACE,QAAO,GAAI,QAAQ;MAC/B,EAAE,OAAOa,KAAK,EAAE;QACd,IAAI,CAACX,YAAW,GACdW,KAAK,CAACF,QAAQ,EAAEf,IAAI,EAAEkB,OAAM,IAAK,+BAA+B;QAClE,IAAI,CAACb,cAAa,GAAI,EAAE;MAC1B,UAAU;QACR,IAAI,CAACG,YAAW,GAAI,KAAK,EAAE;MAC7B;IACF;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import axios from \"@/plugins/axios\";\nimport Navbar from \"@/components/Navbar.vue\";\nimport Sidebar from \"@/components/Sidebar.vue\";\nimport Footer from \"@/components/Footer.vue\";\nimport DashboardCard from \"@/components/DashboardCard.vue\";\nexport default {\n  name: \"DashboardLayout\",\n  components: {\n    Navbar,\n    Sidebar,\n    Footer,\n    DashboardCard\n  },\n  data() {\n    return {\n      sidebarCollapsed: false,\n      summary: {\n        totalRequests: 0,\n        activeServices: 0,\n        pendingRequests: 0,\n        totalUsers: 0,\n        systemLogs: 0\n      },\n      loading: false,\n      error: null,\n      summaryCards: [{\n        key: 'totalRequests',\n        title: 'Total Requests',\n        icon: 'file-alt',\n        trend: 'up'\n      }, {\n        key: 'activeServices',\n        title: 'Active Services',\n        icon: 'cogs',\n        trend: 'neutral'\n      }, {\n        key: 'pendingRequests',\n        title: 'Pending Requests',\n        icon: 'clock',\n        trend: 'up'\n      }, {\n        key: 'totalUsers',\n        title: 'Total Users',\n        icon: 'users',\n        show: () => this.isAdmin\n      }, {\n        key: 'systemLogs',\n        title: 'System Logs',\n        icon: 'clipboard-list',\n        show: () => this.isSuperAdmin\n      }]\n    };\n  },\n  computed: {\n    userData() {\n      return this.$store.getters[\"auth/userData\"] || {};\n    },\n    userRole() {\n      return this.userData.role || \"user\";\n    },\n    isSuperAdmin() {\n      return this.userRole === \"superadmin\";\n    },\n    isAdmin() {\n      return [\"admin\", \"superadmin\"].includes(this.userRole);\n    },\n    filteredSummaryCards() {\n      return this.summaryCards.filter(card => card.show ? card.show() : true);\n    },\n    showSummary() {\n      // Mostrar resumen solo en la ruta de overview\n      return this.$route.path.includes('overview') || this.$route.path === '/admin' || this.$route.path === '/admin/';\n    }\n  },\n  async created() {\n    await this.fetchSummary();\n    this.checkSidebarState();\n  },\n  methods: {\n    toggleSidebar() {\n      this.sidebarCollapsed = !this.sidebarCollapsed;\n      localStorage.setItem('sidebarCollapsed', this.sidebarCollapsed);\n    },\n    checkSidebarState() {\n      const savedState = localStorage.getItem('sidebarCollapsed');\n      if (savedState) {\n        this.sidebarCollapsed = savedState === 'true';\n      }\n    },\n    async fetchSummary() {\n      this.loading = true;\n      this.error = null;\n      try {\n        const response = await axios.get(\"/admin/summary\");\n        this.summary = response.data;\n      } catch (err) {\n        this.error = err.response?.data?.message || \"Error loading dashboard data\";\n        console.error(\"Dashboard error:\", err);\n      } finally {\n        this.loading = false;\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","Navbar","Sidebar","Footer","DashboardCard","name","components","data","sidebarCollapsed","summary","totalRequests","activeServices","pendingRequests","totalUsers","systemLogs","loading","error","summaryCards","key","title","icon","trend","show","isAdmin","isSuperAdmin","computed","userData","$store","getters","userRole","role","includes","filteredSummaryCards","filter","card","showSummary","$route","path","created","fetchSummary","checkSidebarState","methods","toggleSidebar","localStorage","setItem","savedState","getItem","response","get","err","message","console"],"sources":["/home/lated/LatedServices/frontend/src/views/admin/Dashboard.vue"],"sourcesContent":["<template>\r\n  <div class=\"dashboard-layout\">\r\n    <Navbar @toggle-sidebar=\"toggleSidebar\" />\r\n    <Sidebar :collapsed=\"sidebarCollapsed\" />\r\n    \r\n    <main class=\"main-content\" :class=\"{ 'collapsed': sidebarCollapsed }\">\r\n      <div class=\"container-fluid py-4\">\r\n        <!-- Sección de resumen -->\r\n        <transition name=\"fade\">\r\n          <div v-if=\"showSummary\" class=\"summary-section mb-4\">\r\n            <DashboardCard \r\n              v-for=\"(card, index) in filteredSummaryCards\" \r\n              :key=\"index\"\r\n              :title=\"card.title\" \r\n              :value=\"summary[card.key] || 0\" \r\n              :icon=\"card.icon\"\r\n              :trend=\"card.trend\"\r\n            />\r\n          </div>\r\n        </transition>\r\n\r\n        <!-- Contenido dinámico -->\r\n        <router-view v-slot=\"{ Component }\">\r\n          <transition name=\"fade\" mode=\"out-in\">\r\n            <component :is=\"Component\" @refresh-summary=\"fetchSummary\" />\r\n          </transition>\r\n        </router-view>\r\n      </div>\r\n    </main>\r\n\r\n    <Footer />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"@/plugins/axios\";\r\nimport Navbar from \"@/components/Navbar.vue\";\r\nimport Sidebar from \"@/components/Sidebar.vue\";\r\nimport Footer from \"@/components/Footer.vue\";\r\nimport DashboardCard from \"@/components/DashboardCard.vue\";\r\n\r\nexport default {\r\n  name: \"DashboardLayout\",\r\n  components: { Navbar, Sidebar, Footer, DashboardCard },\r\n  data() {\r\n    return {\r\n      sidebarCollapsed: false,\r\n      summary: {\r\n        totalRequests: 0,\r\n        activeServices: 0,\r\n        pendingRequests: 0,\r\n        totalUsers: 0,\r\n        systemLogs: 0,\r\n      },\r\n      loading: false,\r\n      error: null,\r\n      summaryCards: [\r\n        { key: 'totalRequests', title: 'Total Requests', icon: 'file-alt', trend: 'up' },\r\n        { key: 'activeServices', title: 'Active Services', icon: 'cogs', trend: 'neutral' },\r\n        { key: 'pendingRequests', title: 'Pending Requests', icon: 'clock', trend: 'up' },\r\n        { key: 'totalUsers', title: 'Total Users', icon: 'users', show: () => this.isAdmin },\r\n        { key: 'systemLogs', title: 'System Logs', icon: 'clipboard-list', show: () => this.isSuperAdmin }\r\n      ]\r\n    };\r\n  },\r\n  computed: {\r\n    userData() {\r\n      return this.$store.getters[\"auth/userData\"] || {};\r\n    },\r\n    userRole() {\r\n      return this.userData.role || \"user\";\r\n    },\r\n    isSuperAdmin() {\r\n      return this.userRole === \"superadmin\";\r\n    },\r\n    isAdmin() {\r\n      return [\"admin\", \"superadmin\"].includes(this.userRole);\r\n    },\r\n    filteredSummaryCards() {\r\n      return this.summaryCards.filter(card => \r\n        card.show ? card.show() : true\r\n      );\r\n    },\r\n    showSummary() {\r\n      // Mostrar resumen solo en la ruta de overview\r\n      return this.$route.path.includes('overview') || \r\n             this.$route.path === '/admin' || \r\n             this.$route.path === '/admin/';\r\n    }\r\n  },\r\n  async created() {\r\n    await this.fetchSummary();\r\n    this.checkSidebarState();\r\n  },\r\n  methods: {\r\n    toggleSidebar() {\r\n      this.sidebarCollapsed = !this.sidebarCollapsed;\r\n      localStorage.setItem('sidebarCollapsed', this.sidebarCollapsed);\r\n    },\r\n    checkSidebarState() {\r\n      const savedState = localStorage.getItem('sidebarCollapsed');\r\n      if (savedState) {\r\n        this.sidebarCollapsed = savedState === 'true';\r\n      }\r\n    },\r\n    async fetchSummary() {\r\n      this.loading = true;\r\n      this.error = null;\r\n      try {\r\n        const response = await axios.get(\"/admin/summary\");\r\n        this.summary = response.data;\r\n      } catch (err) {\r\n        this.error = err.response?.data?.message || \"Error loading dashboard data\";\r\n        console.error(\"Dashboard error:\", err);\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.dashboard-layout {\r\n  display: flex;\r\n  flex-direction: column;\r\n  min-height: 100vh;\r\n}\r\n\r\n.main-content {\r\n  margin-left: 250px;\r\n  padding: 20px;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.main-content.collapsed {\r\n  margin-left: 80px; /* Cuando el sidebar está colapsado */\r\n}\r\n\r\n.summary-section {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));\r\n  gap: 20px;\r\n  margin-bottom: 30px;\r\n}\r\n\r\n/* Transiciones */\r\n.fade-enter-active,\r\n.fade-leave-active {\r\n  transition: opacity 0.2s ease;\r\n}\r\n\r\n.fade-enter-from,\r\n.fade-leave-to {\r\n  opacity: 0;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .main-content {\r\n    margin-left: 0;\r\n  }\r\n  \r\n  .main-content.collapsed {\r\n    margin-left: 0;\r\n  }\r\n}\r\n</style>"],"mappings":"AAmCA,OAAOA,KAAI,MAAO,iBAAiB;AACnC,OAAOC,MAAK,MAAO,yBAAyB;AAC5C,OAAOC,OAAM,MAAO,0BAA0B;AAC9C,OAAOC,MAAK,MAAO,yBAAyB;AAC5C,OAAOC,aAAY,MAAO,gCAAgC;AAE1D,eAAe;EACbC,IAAI,EAAE,iBAAiB;EACvBC,UAAU,EAAE;IAAEL,MAAM;IAAEC,OAAO;IAAEC,MAAM;IAAEC;EAAc,CAAC;EACtDG,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,gBAAgB,EAAE,KAAK;MACvBC,OAAO,EAAE;QACPC,aAAa,EAAE,CAAC;QAChBC,cAAc,EAAE,CAAC;QACjBC,eAAe,EAAE,CAAC;QAClBC,UAAU,EAAE,CAAC;QACbC,UAAU,EAAE;MACd,CAAC;MACDC,OAAO,EAAE,KAAK;MACdC,KAAK,EAAE,IAAI;MACXC,YAAY,EAAE,CACZ;QAAEC,GAAG,EAAE,eAAe;QAAEC,KAAK,EAAE,gBAAgB;QAAEC,IAAI,EAAE,UAAU;QAAEC,KAAK,EAAE;MAAK,CAAC,EAChF;QAAEH,GAAG,EAAE,gBAAgB;QAAEC,KAAK,EAAE,iBAAiB;QAAEC,IAAI,EAAE,MAAM;QAAEC,KAAK,EAAE;MAAU,CAAC,EACnF;QAAEH,GAAG,EAAE,iBAAiB;QAAEC,KAAK,EAAE,kBAAkB;QAAEC,IAAI,EAAE,OAAO;QAAEC,KAAK,EAAE;MAAK,CAAC,EACjF;QAAEH,GAAG,EAAE,YAAY;QAAEC,KAAK,EAAE,aAAa;QAAEC,IAAI,EAAE,OAAO;QAAEE,IAAI,EAAEA,CAAA,KAAM,IAAI,CAACC;MAAQ,CAAC,EACpF;QAAEL,GAAG,EAAE,YAAY;QAAEC,KAAK,EAAE,aAAa;QAAEC,IAAI,EAAE,gBAAgB;QAAEE,IAAI,EAAEA,CAAA,KAAM,IAAI,CAACE;MAAa;IAErG,CAAC;EACH,CAAC;EACDC,QAAQ,EAAE;IACRC,QAAQA,CAAA,EAAG;MACT,OAAO,IAAI,CAACC,MAAM,CAACC,OAAO,CAAC,eAAe,KAAK,CAAC,CAAC;IACnD,CAAC;IACDC,QAAQA,CAAA,EAAG;MACT,OAAO,IAAI,CAACH,QAAQ,CAACI,IAAG,IAAK,MAAM;IACrC,CAAC;IACDN,YAAYA,CAAA,EAAG;MACb,OAAO,IAAI,CAACK,QAAO,KAAM,YAAY;IACvC,CAAC;IACDN,OAAOA,CAAA,EAAG;MACR,OAAO,CAAC,OAAO,EAAE,YAAY,CAAC,CAACQ,QAAQ,CAAC,IAAI,CAACF,QAAQ,CAAC;IACxD,CAAC;IACDG,oBAAoBA,CAAA,EAAG;MACrB,OAAO,IAAI,CAACf,YAAY,CAACgB,MAAM,CAACC,IAAG,IACjCA,IAAI,CAACZ,IAAG,GAAIY,IAAI,CAACZ,IAAI,CAAC,IAAI,IAC5B,CAAC;IACH,CAAC;IACDa,WAAWA,CAAA,EAAG;MACZ;MACA,OAAO,IAAI,CAACC,MAAM,CAACC,IAAI,CAACN,QAAQ,CAAC,UAAU,KACpC,IAAI,CAACK,MAAM,CAACC,IAAG,KAAM,QAAO,IAC5B,IAAI,CAACD,MAAM,CAACC,IAAG,KAAM,SAAS;IACvC;EACF,CAAC;EACD,MAAMC,OAAOA,CAAA,EAAG;IACd,MAAM,IAAI,CAACC,YAAY,CAAC,CAAC;IACzB,IAAI,CAACC,iBAAiB,CAAC,CAAC;EAC1B,CAAC;EACDC,OAAO,EAAE;IACPC,aAAaA,CAAA,EAAG;MACd,IAAI,CAAClC,gBAAe,GAAI,CAAC,IAAI,CAACA,gBAAgB;MAC9CmC,YAAY,CAACC,OAAO,CAAC,kBAAkB,EAAE,IAAI,CAACpC,gBAAgB,CAAC;IACjE,CAAC;IACDgC,iBAAiBA,CAAA,EAAG;MAClB,MAAMK,UAAS,GAAIF,YAAY,CAACG,OAAO,CAAC,kBAAkB,CAAC;MAC3D,IAAID,UAAU,EAAE;QACd,IAAI,CAACrC,gBAAe,GAAIqC,UAAS,KAAM,MAAM;MAC/C;IACF,CAAC;IACD,MAAMN,YAAYA,CAAA,EAAG;MACnB,IAAI,CAACxB,OAAM,GAAI,IAAI;MACnB,IAAI,CAACC,KAAI,GAAI,IAAI;MACjB,IAAI;QACF,MAAM+B,QAAO,GAAI,MAAM/C,KAAK,CAACgD,GAAG,CAAC,gBAAgB,CAAC;QAClD,IAAI,CAACvC,OAAM,GAAIsC,QAAQ,CAACxC,IAAI;MAC9B,EAAE,OAAO0C,GAAG,EAAE;QACZ,IAAI,CAACjC,KAAI,GAAIiC,GAAG,CAACF,QAAQ,EAAExC,IAAI,EAAE2C,OAAM,IAAK,8BAA8B;QAC1EC,OAAO,CAACnC,KAAK,CAAC,kBAAkB,EAAEiC,GAAG,CAAC;MACxC,UAAU;QACR,IAAI,CAAClC,OAAM,GAAI,KAAK;MACtB;IACF;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, vModelText as _vModelText, withDirectives as _withDirectives, vModelSelect as _vModelSelect, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = {\n  class: \"content\"\n};\nconst _hoisted_2 = {\n  class: \"container mt-5\"\n};\nconst _hoisted_3 = {\n  key: 0,\n  class: \"alert alert-success\",\n  role: \"alert\"\n};\nconst _hoisted_4 = {\n  key: 1,\n  class: \"alert alert-danger\",\n  role: \"alert\"\n};\nconst _hoisted_5 = {\n  key: 2,\n  class: \"text-center\"\n};\nconst _hoisted_6 = {\n  class: \"form-group\"\n};\nconst _hoisted_7 = [\"value\"];\nconst _hoisted_8 = {\n  class: \"form-group\"\n};\nconst _hoisted_9 = {\n  class: \"form-group\"\n};\nconst _hoisted_10 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_Navbar = _resolveComponent(\"Navbar\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_Navbar), _createElementVNode(\"div\", _hoisted_2, [_cache[8] || (_cache[8] = _createElementVNode(\"h2\", {\n    class: \"mb-4\"\n  }, \"Solicitar un Servicio\", -1 /* HOISTED */)), _createCommentVNode(\" Mensaje de éxito \"), $data.successMessage ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, _toDisplayString($data.successMessage), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Mensaje de error \"), $data.errorMessage ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, _toDisplayString($data.errorMessage), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Indicador de carga \"), $data.isLoading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, _cache[3] || (_cache[3] = [_createElementVNode(\"p\", null, \"Cargando detalles del servicio...\", -1 /* HOISTED */)]))) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Formulario de solicitud \"), !$data.isLoading && $data.service ? (_openBlock(), _createElementBlock(\"form\", {\n    key: 3,\n    onSubmit: _cache[2] || (_cache[2] = _withModifiers((...args) => $options.submitRequest && $options.submitRequest(...args), [\"prevent\"]))\n  }, [_createElementVNode(\"div\", _hoisted_6, [_cache[4] || (_cache[4] = _createElementVNode(\"label\", {\n    for: \"serviceName\"\n  }, \"Nombre del Servicio\", -1 /* HOISTED */)), _createElementVNode(\"input\", {\n    id: \"serviceName\",\n    type: \"text\",\n    class: \"form-control\",\n    value: $data.service.name,\n    disabled: \"\"\n  }, null, 8 /* PROPS */, _hoisted_7)]), _createElementVNode(\"div\", _hoisted_8, [_cache[5] || (_cache[5] = _createElementVNode(\"label\", {\n    for: \"description\"\n  }, \"Descripción\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"textarea\", {\n    id: \"description\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.form.description = $event),\n    class: \"form-control\",\n    rows: \"4\",\n    placeholder: \"Describe el servicio que necesitas\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.form.description]])]), _createElementVNode(\"div\", _hoisted_9, [_cache[7] || (_cache[7] = _createElementVNode(\"label\", {\n    for: \"priority\"\n  }, \"Prioridad\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"select\", {\n    id: \"priority\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.form.priority = $event),\n    class: \"form-control\",\n    required: \"\"\n  }, _cache[6] || (_cache[6] = [_createElementVNode(\"option\", {\n    value: \"low\"\n  }, \"Baja\", -1 /* HOISTED */), _createElementVNode(\"option\", {\n    value: \"medium\"\n  }, \"Media\", -1 /* HOISTED */), _createElementVNode(\"option\", {\n    value: \"high\"\n  }, \"Alta\", -1 /* HOISTED */)]), 512 /* NEED_PATCH */), [[_vModelSelect, $data.form.priority]])]), _createElementVNode(\"button\", {\n    type: \"submit\",\n    class: \"btn btn-primary\",\n    disabled: $data.isSubmitting\n  }, _toDisplayString($data.isSubmitting ? \"Enviando...\" : \"Enviar Solicitud\"), 9 /* TEXT, PROPS */, _hoisted_10)], 32 /* NEED_HYDRATION */)) : _createCommentVNode(\"v-if\", true)])]);\n}","map":{"version":3,"names":["class","key","role","_createElementBlock","_hoisted_1","_createVNode","_component_Navbar","_createElementVNode","_hoisted_2","_createCommentVNode","$data","successMessage","_hoisted_3","_toDisplayString","errorMessage","_hoisted_4","isLoading","_hoisted_5","_cache","service","onSubmit","_withModifiers","args","$options","submitRequest","_hoisted_6","for","id","type","value","name","disabled","_hoisted_7","_hoisted_8","$event","form","description","rows","placeholder","required","_hoisted_9","priority","isSubmitting","_hoisted_10"],"sources":["/home/lated/LatedServices/frontend/src/views/client/RequestService.vue"],"sourcesContent":["<template>\n  <div class=\"content\">\n    <Navbar />\n    <div class=\"container mt-5\">\n      <h2 class=\"mb-4\">Solicitar un Servicio</h2>\n\n      <!-- Mensaje de éxito -->\n      <div v-if=\"successMessage\" class=\"alert alert-success\" role=\"alert\">\n        {{ successMessage }}\n      </div>\n\n      <!-- Mensaje de error -->\n      <div v-if=\"errorMessage\" class=\"alert alert-danger\" role=\"alert\">\n        {{ errorMessage }}\n      </div>\n\n      <!-- Indicador de carga -->\n      <div v-if=\"isLoading\" class=\"text-center\">\n        <p>Cargando detalles del servicio...</p>\n      </div>\n\n      <!-- Formulario de solicitud -->\n      <form v-if=\"!isLoading && service\" @submit.prevent=\"submitRequest\">\n        <div class=\"form-group\">\n          <label for=\"serviceName\">Nombre del Servicio</label>\n          <input\n            id=\"serviceName\"\n            type=\"text\"\n            class=\"form-control\"\n            :value=\"service.name\"\n            disabled\n          />\n        </div>\n        <div class=\"form-group\">\n          <label for=\"description\">Descripción</label>\n          <textarea\n            id=\"description\"\n            v-model=\"form.description\"\n            class=\"form-control\"\n            rows=\"4\"\n            placeholder=\"Describe el servicio que necesitas\"\n            required\n          ></textarea>\n        </div>\n        <div class=\"form-group\">\n          <label for=\"priority\">Prioridad</label>\n          <select\n            id=\"priority\"\n            v-model=\"form.priority\"\n            class=\"form-control\"\n            required\n          >\n            <option value=\"low\">Baja</option>\n            <option value=\"medium\">Media</option>\n            <option value=\"high\">Alta</option>\n          </select>\n        </div>\n        <button type=\"submit\" class=\"btn btn-primary\" :disabled=\"isSubmitting\">\n          {{ isSubmitting ? \"Enviando...\" : \"Enviar Solicitud\" }}\n        </button>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"@/plugins/axios\";\nimport Navbar from \"@/components/Navbar.vue\";\n\nexport default {\n  name: \"RequestService\",\n  components: { Navbar },\n  data() {\n    return {\n      service: null, // Detalles del servicio seleccionado\n      form: {\n        description: \"\",\n        priority: \"medium\",\n      },\n      successMessage: \"\",\n      errorMessage: \"\",\n      isLoading: true, // Estado para manejar la carga de datos\n      isSubmitting: false, // Estado para manejar el envío del formulario\n    };\n  },\n  async created() {\n    const serviceId = this.$route.query.serviceId;\n    if (!serviceId) {\n      this.errorMessage = \"No se proporcionó un ID de servicio.\";\n      this.isLoading = false;\n      return;\n    }\n    await this.fetchService(serviceId);\n  },\n  methods: {\n    async fetchService(serviceId) {\n      try {\n        const response = await axios.get(`/services/${serviceId}`);\n        this.service = response.data;\n        this.errorMessage = \"\";\n      } catch (error) {\n        this.errorMessage =\n          error.response?.data?.message || \"Error al cargar los detalles del servicio.\";\n      } finally {\n        this.isLoading = false;\n      }\n    },\n    async submitRequest() {\n      this.isSubmitting = true; // Activa el estado de envío\n      try {\n        await axios.post(\"/requests\", {\n          serviceId: this.service.id,\n          description: this.form.description,\n          priority: this.form.priority,\n        });\n        this.successMessage = \"¡Solicitud enviada exitosamente!\";\n        this.errorMessage = \"\";\n        this.form.description = \"\"; // Reinicia el formulario\n        this.form.priority = \"medium\";\n      } catch (error) {\n        this.errorMessage =\n          error.response?.data?.message || \"Error al enviar la solicitud.\";\n        this.successMessage = \"\";\n      } finally {\n        this.isSubmitting = false; // Desactiva el estado de envío\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.content {\n  margin-top: 70px; /* Ajusta este valor según la altura de tu Navbar */\n}\n.container {\n  max-width: 600px;\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
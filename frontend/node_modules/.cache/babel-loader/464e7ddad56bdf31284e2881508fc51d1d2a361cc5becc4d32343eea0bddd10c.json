{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock, Transition as _Transition, withCtx as _withCtx, resolveDynamicComponent as _resolveDynamicComponent, createElementVNode as _createElementVNode, normalizeClass as _normalizeClass } from \"vue\";\nconst _hoisted_1 = {\n  class: \"dashboard-layout\"\n};\nconst _hoisted_2 = {\n  class: \"container-fluid py-4\"\n};\nconst _hoisted_3 = {\n  key: 0,\n  class: \"summary-section mb-4\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_Navbar = _resolveComponent(\"Navbar\");\n  const _component_Sidebar = _resolveComponent(\"Sidebar\");\n  const _component_DashboardCard = _resolveComponent(\"DashboardCard\");\n  const _component_router_view = _resolveComponent(\"router-view\");\n  const _component_Footer = _resolveComponent(\"Footer\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_Navbar, {\n    onToggleSidebar: $options.toggleSidebar\n  }, null, 8 /* PROPS */, [\"onToggleSidebar\"]), _createVNode(_component_Sidebar, {\n    collapsed: $data.sidebarCollapsed\n  }, null, 8 /* PROPS */, [\"collapsed\"]), _createElementVNode(\"main\", {\n    class: _normalizeClass([\"main-content\", {\n      'collapsed': $data.sidebarCollapsed\n    }])\n  }, [_createElementVNode(\"div\", _hoisted_2, [_createCommentVNode(\" Sección de resumen \"), _createVNode(_Transition, {\n    name: \"fade\"\n  }, {\n    default: _withCtx(() => [$options.showSummary ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.filteredSummaryCards, (card, index) => {\n      return _openBlock(), _createBlock(_component_DashboardCard, {\n        key: index,\n        title: card.title,\n        value: $data.summary[card.key] || 0,\n        icon: card.icon,\n        trend: card.trend\n      }, null, 8 /* PROPS */, [\"title\", \"value\", \"icon\", \"trend\"]);\n    }), 128 /* KEYED_FRAGMENT */))])) : _createCommentVNode(\"v-if\", true)]),\n    _: 1 /* STABLE */\n  }), _createCommentVNode(\" Contenido dinámico \"), _createVNode(_component_router_view, null, {\n    default: _withCtx(({\n      Component\n    }) => [_createVNode(_Transition, {\n      name: \"fade\",\n      mode: \"out-in\"\n    }, {\n      default: _withCtx(() => [(_openBlock(), _createBlock(_resolveDynamicComponent(Component), {\n        onRefreshSummary: $options.fetchSummary\n      }, null, 40 /* PROPS, NEED_HYDRATION */, [\"onRefreshSummary\"]))]),\n      _: 2 /* DYNAMIC */\n    }, 1024 /* DYNAMIC_SLOTS */)]),\n    _: 1 /* STABLE */\n  })])], 2 /* CLASS */), _createVNode(_component_Footer)]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createVNode","_component_Navbar","onToggleSidebar","$options","toggleSidebar","_component_Sidebar","collapsed","$data","sidebarCollapsed","_createElementVNode","_normalizeClass","_hoisted_2","_createCommentVNode","_Transition","name","default","_withCtx","showSummary","_hoisted_3","_Fragment","_renderList","filteredSummaryCards","card","index","_createBlock","_component_DashboardCard","title","value","summary","icon","trend","_","_component_router_view","Component","mode","_resolveDynamicComponent","onRefreshSummary","fetchSummary","_component_Footer"],"sources":["/home/lated/LatedServices/frontend/src/views/admin/Dashboard.vue"],"sourcesContent":["<template>\r\n  <div class=\"dashboard-layout\">\r\n    <Navbar @toggle-sidebar=\"toggleSidebar\" />\r\n    <Sidebar :collapsed=\"sidebarCollapsed\" />\r\n    \r\n    <main class=\"main-content\" :class=\"{ 'collapsed': sidebarCollapsed }\">\r\n      <div class=\"container-fluid py-4\">\r\n        <!-- Sección de resumen -->\r\n        <transition name=\"fade\">\r\n          <div v-if=\"showSummary\" class=\"summary-section mb-4\">\r\n            <DashboardCard \r\n              v-for=\"(card, index) in filteredSummaryCards\" \r\n              :key=\"index\"\r\n              :title=\"card.title\" \r\n              :value=\"summary[card.key] || 0\" \r\n              :icon=\"card.icon\"\r\n              :trend=\"card.trend\"\r\n            />\r\n          </div>\r\n        </transition>\r\n\r\n        <!-- Contenido dinámico -->\r\n        <router-view v-slot=\"{ Component }\">\r\n          <transition name=\"fade\" mode=\"out-in\">\r\n            <component :is=\"Component\" @refresh-summary=\"fetchSummary\" />\r\n          </transition>\r\n        </router-view>\r\n      </div>\r\n    </main>\r\n\r\n    <Footer />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"@/plugins/axios\";\r\nimport Navbar from \"@/components/Navbar.vue\";\r\nimport Sidebar from \"@/components/Sidebar.vue\";\r\nimport Footer from \"@/components/Footer.vue\";\r\nimport DashboardCard from \"@/components/DashboardCard.vue\";\r\n\r\nexport default {\r\n  name: \"DashboardLayout\",\r\n  components: { Navbar, Sidebar, Footer, DashboardCard },\r\n  data() {\r\n    return {\r\n      sidebarCollapsed: false,\r\n      summary: {\r\n        totalRequests: 0,\r\n        activeServices: 0,\r\n        pendingRequests: 0,\r\n        totalUsers: 0,\r\n        systemLogs: 0,\r\n      },\r\n      loading: false,\r\n      error: null,\r\n      summaryCards: [\r\n        { key: 'totalRequests', title: 'Total Requests', icon: 'file-alt', trend: 'up' },\r\n        { key: 'activeServices', title: 'Active Services', icon: 'cogs', trend: 'neutral' },\r\n        { key: 'pendingRequests', title: 'Pending Requests', icon: 'clock', trend: 'up' },\r\n        { key: 'totalUsers', title: 'Total Users', icon: 'users', show: () => this.isAdmin },\r\n        { key: 'systemLogs', title: 'System Logs', icon: 'clipboard-list', show: () => this.isSuperAdmin }\r\n      ]\r\n    };\r\n  },\r\n  computed: {\r\n    userData() {\r\n      return this.$store.getters[\"auth/userData\"] || {};\r\n    },\r\n    userRole() {\r\n      return this.userData.role || \"user\";\r\n    },\r\n    isSuperAdmin() {\r\n      return this.userRole === \"superadmin\";\r\n    },\r\n    isAdmin() {\r\n      return [\"admin\", \"superadmin\"].includes(this.userRole);\r\n    },\r\n    filteredSummaryCards() {\r\n      return this.summaryCards.filter(card => \r\n        card.show ? card.show() : true\r\n      );\r\n    },\r\n    showSummary() {\r\n      // Mostrar resumen solo en la ruta de overview\r\n      return this.$route.path.includes('overview') || \r\n             this.$route.path === '/admin' || \r\n             this.$route.path === '/admin/';\r\n    }\r\n  },\r\n  async created() {\r\n    await this.fetchSummary();\r\n    this.checkSidebarState();\r\n  },\r\n  methods: {\r\n    toggleSidebar() {\r\n      this.sidebarCollapsed = !this.sidebarCollapsed;\r\n      localStorage.setItem('sidebarCollapsed', this.sidebarCollapsed);\r\n    },\r\n    checkSidebarState() {\r\n      const savedState = localStorage.getItem('sidebarCollapsed');\r\n      if (savedState) {\r\n        this.sidebarCollapsed = savedState === 'true';\r\n      }\r\n    },\r\n    async fetchSummary() {\r\n      this.loading = true;\r\n      this.error = null;\r\n      try {\r\n        const response = await axios.get(\"/admin/summary\");\r\n        this.summary = response.data;\r\n      } catch (err) {\r\n        this.error = err.response?.data?.message || \"Error loading dashboard data\";\r\n        console.error(\"Dashboard error:\", err);\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.dashboard-layout {\r\n  display: flex;\r\n  flex-direction: column;\r\n  min-height: 100vh;\r\n}\r\n\r\n.main-content {\r\n  margin-left: 250px;\r\n  padding: 20px;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.main-content.collapsed {\r\n  margin-left: 80px; /* Cuando el sidebar está colapsado */\r\n}\r\n\r\n.summary-section {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));\r\n  gap: 20px;\r\n  margin-bottom: 30px;\r\n}\r\n\r\n/* Transiciones */\r\n.fade-enter-active,\r\n.fade-leave-active {\r\n  transition: opacity 0.2s ease;\r\n}\r\n\r\n.fade-enter-from,\r\n.fade-leave-to {\r\n  opacity: 0;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .main-content {\r\n    margin-left: 0;\r\n  }\r\n  \r\n  .main-content.collapsed {\r\n    margin-left: 0;\r\n  }\r\n}\r\n</style>"],"mappings":";;EACOA,KAAK,EAAC;AAAkB;;EAKpBA,KAAK,EAAC;AAAsB;;EANvCC,GAAA;EASkCD,KAAK,EAAC;;;;;;;;uBARtCE,mBAAA,CA8BM,OA9BNC,UA8BM,GA7BJC,YAAA,CAA0CC,iBAAA;IAAjCC,eAAc,EAAEC,QAAA,CAAAC;EAAa,8CACtCJ,YAAA,CAAyCK,kBAAA;IAA/BC,SAAS,EAAEC,KAAA,CAAAC;EAAgB,wCAErCC,mBAAA,CAuBO;IAvBDb,KAAK,EALfc,eAAA,EAKgB,cAAc;MAAA,aAAwBH,KAAA,CAAAC;IAAgB;MAChEC,mBAAA,CAqBM,OArBNE,UAqBM,GApBJC,mBAAA,wBAA2B,EAC3BZ,YAAA,CAWaa,WAAA;IAXDC,IAAI,EAAC;EAAM;IAR/BC,OAAA,EAAAC,QAAA,CASU,MASM,CATKb,QAAA,CAAAc,WAAW,I,cAAtBnB,mBAAA,CASM,OATNoB,UASM,I,kBARJpB,mBAAA,CAOEqB,SAAA,QAjBdC,WAAA,CAWsCjB,QAAA,CAAAkB,oBAAoB,EAX1D,CAWsBC,IAAI,EAAEC,KAAK;2BADrBC,YAAA,CAOEC,wBAAA;QALC5B,GAAG,EAAE0B,KAAK;QACVG,KAAK,EAAEJ,IAAI,CAACI,KAAK;QACjBC,KAAK,EAAEpB,KAAA,CAAAqB,OAAO,CAACN,IAAI,CAACzB,GAAG;QACvBgC,IAAI,EAAEP,IAAI,CAACO,IAAI;QACfC,KAAK,EAAER,IAAI,CAACQ;;wCAhB3BlB,mBAAA,e;IAAAmB,CAAA;MAqBQnB,mBAAA,wBAA2B,EAC3BZ,YAAA,CAIcgC,sBAAA;IA1BtBjB,OAAA,EAAAC,QAAA,CAuBU,CAEa;MAHQiB;IAAS,OAC9BjC,YAAA,CAEaa,WAAA;MAFDC,IAAI,EAAC,MAAM;MAACoB,IAAI,EAAC;;MAvBvCnB,OAAA,EAAAC,QAAA,CAwBY,MAA6D,E,cAA7DQ,YAAA,CAA6DW,wBAxBzE,CAwB4BF,SAAS;QAAGG,gBAAe,EAAEjC,QAAA,CAAAkC;MAAY,gE;MAxBrEN,CAAA;;IAAAA,CAAA;yBA8BI/B,YAAA,CAAUsC,iBAAA,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}